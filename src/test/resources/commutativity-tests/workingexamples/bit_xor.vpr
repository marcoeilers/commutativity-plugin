

field f1 : Bool

function xor(b1: Bool, b2: Bool): Bool
{
  (b1 || b2) && !(b1 && b2)
}

lockType Flag {
  type Bool
  invariant(l, v) = [l.f1 |-> ?fv1 && fv1 == v]
  alpha(v): Bool = v

  actions = [(Xor,Bool,duplicable)]

  action Xor(v, a)
    requires low(a)
  { xor(v, a) }
}